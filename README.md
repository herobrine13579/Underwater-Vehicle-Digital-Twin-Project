# 水下车数字孪生项目

***

### 一、主要模块

环境建设，运动控制，信息传输，UI设计

***

##### 环境建设

使用unity建立一个与作业地形一致的海底地形，并且将水下车模型导入这个环境内。

需要解决的技术问题：

1. 寻找并掌握合适的unity3d地形构建插件的使用方法。
2. 找到相对应的海底物件的实体模型包，将这些实体按照真实的情况进行摆放。
3. 地形的物理属性需要设置，保证能够让小车按照真实的物理状态运动在海底。

***

##### 运动控制

设计数据输入的接口获取外部传递进来的水下车控制信息，控制水下车在显示屏上运动，并且显示作业前方地形和周围环境。其中根据这个水下车的模型显示它有2个履带，两个履带的速度需要分开计算（我个人猜测是差速轮模型）。

需要解决的技术问题：

1. 履带的运动模型的制作，赋予真实物理特性，能够正常旋转前进。
2. 将履带套在小车模型上，带动小车前进。

***

##### 信息接收

需要接收传感器给出的：

1、整体：作业车水深（这一项可以通过坐标直接得出）、作业车姿态（两个角度参数、一个航向参数）、液压系统压力（执行机构）、作业车行走速度、液压系统温度、电机温度

2、作业机构部分：大臂油缸位移、小臂油缸位移、转动油缸位移、搅动作业流量、压力

3、行走部分：左、右履带行走速度（各一个），左右履带行走压力（各一个）

4、抽吸部分：水泵出口压力、水泵液压流量、水泵液压压力

将以上内容读取并且显示在UI上，此部分的实现是由传感器提供。

需要解决的问题：

1. 定义数据格式

2. 实现相应的读入功能，提供接口让UI直接调用

***

##### UI设计

对程序的界面进行基本设计，在屏幕的边角处显示所有的参数，能够创建摄像头对准模型，并且做出能够使用鼠标改变视角的功能，便于时刻观察模型的运动状态。在后面的开发中需要根据实际的需求进行UI的更改。此部分可以使用unity3d中的画布进行实现，需要一定的设计保证界面的清晰。

需要解决的问题：

1. 掌握制作UI界面的方法
2. 根据所需要的参数数量和类型，合设计出清晰合理的UI界面。

***

### 二、项目合作方式

可以使用GitHub仓库进行代码共享，GitHub同步代码较为便捷，方便项目的合作。据了解，GitHub单个仓库的最大容量为1G，如果遇到较大的材质包可以使用.gitignore文件忽略。

***

### 三、时间安排

周老师建议7月20日以前完成基本界面设计，海底环境设计，水下车模型导入，以及控制接口。

后面的时间安排待定。

***

### 四、原需求文档

1） 数据输入：可实时接入作业车三维模型、作业水深、倾角、姿态、输送管、实时地形（或作业前导入地形）等数据。

2） 数据处理及显示：可将输入的数据在软件中实时处理，并将处理结果结合作业车的实际情况通过三维视频在显示屏中显示，显示内容包括实时三维环境（或作业前导入环境）、实时作业车状态等。

3） 控制信号输入：显示界面具有控制参数输入及内部控制信号输入接口，操作人员可根据控制需求，输入控制信号，控制水下作业车的工作。

##### 水下作业车当前技术状态及预期目标

###### 目前技术状态

1、水面控制平台安装有上位机、人机交互界面，水下车辆载有下位机

2、下位机将采集到的数据通过光线传递给上位机，上位机对数据进行处理，同时将获得的数据或处理后的数据在人机交互界面显示；人机交互界面显示当前车的各项作业参数，同时可以通过人机交互界面对车辆进行控制。

3、当前显示的参数有：

整体：作业车水深、作业车姿态（两个角度参数、一个航向参数）、作业前方地形、液压系统压力（执行机构）、作业车行走速度、液压系统温度、电机温度

作业机构部分：大臂油缸位移、小臂油缸位移、转动油缸位移、搅动作业流量、压力

行走部分：左、右履带行走速度（各一个），左右履带行走压力（各一个）

抽吸部分：水泵出口压力、水泵液压流量、水泵液压压力

视频部分：前方、履带、后方、侧方（2个）

###### 预期效果

1、可以将作业环境地形及作业车三维模型（含船舶、管道、作业车、缆）提前导入软件中，形成三维作业环境；

2、可将实时测得的作业车前方地形参数接入三维环境中，随着作业车的作业（环境地形发生变化），通过实时地形数据对三维环境进行修正，并在并在三维视频中显示；

3、可通过作业车布放时的位置（与水面船舶的相互位置）、作业过程中的速度、航向、水深等参算计算出作业车的实时位置，并在三维视频中显示；

4、可通过作业机构的参数（大臂油缸位移、小臂油缸位移、转动油缸位移、搅动作业流量、压力等参数），计算出作业机构的实时作业状态，并在三维视频中实时显示；

5、通过行走履带的速度、压力，计算出履带的实时作业状态，并在三维视频中实时显示；

6、通过水泵的出口压力、水泵液压流量、水泵液压压力，计算出水泵的工作状态，并在并在三维视频中实时显示。

7、具备数据储存及查找功能

8、备用接口功能，预留数据接入接口；多种三维模型及地形数据导入。